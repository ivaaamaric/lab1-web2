{"remainingRequest":"/Users/ivaaamaric/Downloads/01-login/node_modules/babel-loader/lib/index.js!/Users/ivaaamaric/Downloads/01-login/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/ivaaamaric/Downloads/01-login/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/ivaaamaric/Downloads/01-login/src/views/Comments.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ivaaamaric/Downloads/01-login/src/views/Comments.vue","mtime":1667166193991},{"path":"/Users/ivaaamaric/Downloads/01-login/babel.config.js","mtime":1666890630000},{"path":"/Users/ivaaamaric/Downloads/01-login/node_modules/cache-loader/dist/cjs.js","mtime":1667133495839},{"path":"/Users/ivaaamaric/Downloads/01-login/node_modules/babel-loader/lib/index.js","mtime":1667133498348},{"path":"/Users/ivaaamaric/Downloads/01-login/node_modules/cache-loader/dist/cjs.js","mtime":1667133495839},{"path":"/Users/ivaaamaric/Downloads/01-login/node_modules/vue-loader-v16/dist/index.js","mtime":1667133496278}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCBqc29uIGZyb20gJy4uL2pzb24vY29tbWVudHMuanNvbic7CmltcG9ydCB7IHVzZUF1dGgwIH0gZnJvbSAnQGF1dGgwL2F1dGgwLXZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgYXV0aDAgPSB1c2VBdXRoMCgpOwogICAgcmV0dXJuIHsKICAgICAgaG9tZTogdGhpcy4kcm91dGUucGFyYW1zLmhvbWUsCiAgICAgIHZpc2l0b3I6IHRoaXMuJHJvdXRlLnBhcmFtcy52aXNpdG9yLAogICAgICBvbGRDb21tZW50czoganNvbi5jb21tZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNvbW1lbnQpIHsKICAgICAgICByZXR1cm4gY29tbWVudC5nYW1lSWQgPT0gX3RoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgfSksCiAgICAgIGFsbExvY2FsQ29tbWVudHM6IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb21tZW50cycpKSwKICAgICAgaW5wdXQ6ICIiLAogICAgICBlZGl0aW5nTW9kZTogZmFsc2UsCiAgICAgIGVkaXRpbmdDb21tZW50OiBudWxsLAogICAgICB1c2VyOiBhdXRoMC51c2VyCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWRkQ29tbWVudDogZnVuY3Rpb24gYWRkQ29tbWVudChjb21tZW50KSB7CiAgICAgIGlmIChjb21tZW50LmNvbW1lbnQgPT0gIiIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVkaXRpbmdNb2RlICYmIHRoaXMuZWRpdGluZ0NvbW1lbnQgIT0gbnVsbCkgewogICAgICAgIHZhciBpbmRleCA9IHRoaXMuYWxsTG9jYWxDb21tZW50cy5pbmRleE9mKHRoaXMuZWRpdGluZ0NvbW1lbnQpOwoKICAgICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgICAgdGhpcy5hbGxMb2NhbENvbW1lbnRzW2luZGV4XS5jb21tZW50ID0gdGhpcy5pbnB1dDsKCiAgICAgICAgICB2YXIgX2RhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmFsbExvY2FsQ29tbWVudHMpOwoKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY29tbWVudHMnLCBfZGF0YSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmlucHV0ID0gIiI7CiAgICAgICAgdGhpcy5lZGl0aW5nTW9kZSA9IGZhbHNlOwogICAgICAgIHRoaXMuZWRpdGluZ0NvbW1lbnQgPSBudWxsOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGxvY2FsID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb21tZW50cycpOwogICAgICB2YXIgbG9jYWxDb21tZW50cyA9IEpTT04ucGFyc2UobG9jYWwpOwogICAgICBpZiAobG9jYWxDb21tZW50cyA9PSBudWxsIHx8IGxvY2FsQ29tbWVudHMgPT0gdW5kZWZpbmVkKSBsb2NhbENvbW1lbnRzID0gW107CiAgICAgIGxvY2FsQ29tbWVudHMucHVzaCh7CiAgICAgICAgZ2FtZUlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsCiAgICAgICAgdXNlcjogdGhpcy51c2VyLm5hbWUsCiAgICAgICAgY29tbWVudDogY29tbWVudAogICAgICB9KTsKICAgICAgdmFyIGRhdGEgPSBKU09OLnN0cmluZ2lmeShsb2NhbENvbW1lbnRzKTsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjb21tZW50cycsIGRhdGEpOwogICAgICB0aGlzLmFsbExvY2FsQ29tbWVudHMgPSBsb2NhbENvbW1lbnRzOwogICAgICB0aGlzLmlucHV0ID0gIiI7CiAgICB9LAogICAgZGVsZXRlQ29tbWVudDogZnVuY3Rpb24gZGVsZXRlQ29tbWVudChjb21tZW50KSB7CiAgICAgIGlmIChjb21tZW50LnVzZXIgIT0gdGhpcy51c2VyLm5hbWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpbmRleCA9IHRoaXMuYWxsTG9jYWxDb21tZW50cy5pbmRleE9mKGNvbW1lbnQpOwoKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICB0aGlzLmFsbExvY2FsQ29tbWVudHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuYWxsTG9jYWxDb21tZW50cyk7CiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjb21tZW50cycsIGRhdGEpOwogICAgICB9CgogICAgICBpbmRleCA9IHRoaXMub2xkQ29tbWVudHMuaW5kZXhPZihjb21tZW50KTsKCiAgICAgIGlmIChpbmRleCA+IC0xKSB7CiAgICAgICAgdGhpcy5vbGRDb21tZW50cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlQ29tbWVudDogZnVuY3Rpb24gdXBkYXRlQ29tbWVudChjb21tZW50KSB7CiAgICAgIGlmIChjb21tZW50LnVzZXIgIT0gdGhpcy51c2VyLm5hbWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuaW5wdXQgPSBjb21tZW50LmNvbW1lbnQ7CiAgICAgIHRoaXMuZWRpdGluZ01vZGUgPSB0cnVlOwogICAgICB0aGlzLmVkaXRpbmdDb21tZW50ID0gY29tbWVudDsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"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","names":["json","useAuth0","data","auth0","home","$route","params","visitor","oldComments","comments","filter","comment","gameId","id","allLocalComments","JSON","parse","window","localStorage","getItem","input","editingMode","editingComment","user","methods","addComment","index","indexOf","stringify","setItem","local","localComments","undefined","push","name","deleteComment","splice","updateComment"],"sourceRoot":"","sources":["/Users/ivaaamaric/Downloads/01-login/src/views/Comments.vue"],"sourcesContent":["<template>\n    <div>\n        <h2>Comments on {{ home }} vs. {{ visitor }}:</h2>\n        <div v-for=\"comment in oldComments\" :key=\"comment\">\n            <p>{{ comment.user }} said: {{ comment.comment }}\n                <img v-if=\"user.role == admin\" @click=\"deleteComment(comment)\"\n                    src=\"../assets/delete.png\" height=\"25\" />\n            </p>\n        </div>\n        <div v-for=\"comment in allLocalComments?.filter((comment) => comment.gameId == this.$route.params.id)\"\n            :key=\"comment\">\n            <p>{{ comment.user }} said: {{ comment.comment }}\n                <img v-if=\"comment.user == user.name || user.role == admin\" @click=\"deleteComment(comment)\"\n                    src=\"../assets/delete.png\" height=\"25\" />\n                <img v-if=\"comment.user == user.name\" @click=\"updateComment(comment)\" src=\"../assets/edit.png\"\n                    height=\"25\" />\n            </p>\n        </div>\n    </div>\n    <div>\n        <textarea v-model=\"input\" />\n    </div>\n    <button @click=\"addComment(input)\">Have your say</button>\n</template>\n  \n<script>\nimport json from '../json/comments.json'\nimport { useAuth0 } from '@auth0/auth0-vue';\n\nexport default {\n    data() {\n        const auth0 = useAuth0()\n        return {\n            home: this.$route.params.home,\n            visitor: this.$route.params.visitor,\n            oldComments: json.comments.filter((comment) => comment.gameId == this.$route.params.id),\n            allLocalComments: JSON.parse(window.localStorage.getItem('comments')),\n            input: \"\",\n            editingMode: false,\n            editingComment: null,\n            user: auth0.user\n        }\n    },\n    methods: {\n        addComment(comment) {\n            if(comment.comment == \"\") {\n                return\n            }\n            if (this.editingMode && this.editingComment != null) {\n                var index = this.allLocalComments.indexOf(this.editingComment)\n                if (index > -1) {\n                    this.allLocalComments[index].comment = this.input\n                    const data = JSON.stringify(this.allLocalComments)\n                    window.localStorage.setItem('comments', data)\n                }\n                this.input = \"\"\n                this.editingMode = false\n                this.editingComment = null\n                return\n            }\n\n            var local = window.localStorage.getItem('comments')\n            var localComments = JSON.parse(local)\n            if (localComments == null || localComments == undefined) localComments = []\n            localComments.push({ gameId: this.$route.params.id, user: this.user.name, comment: comment })\n            const data = JSON.stringify(localComments)\n            window.localStorage.setItem('comments', data)\n            this.allLocalComments = localComments\n            this.input = \"\"\n        },\n        deleteComment(comment) {\n            if (comment.user != this.user.name) {\n                return\n            }\n            var index = this.allLocalComments.indexOf(comment)\n            if (index > -1) {\n                this.allLocalComments.splice(index, 1)\n                const data = JSON.stringify(this.allLocalComments)\n                window.localStorage.setItem('comments', data)\n            }\n            index = this.oldComments.indexOf(comment)\n            if (index > -1) {\n                this.oldComments.splice(index, 1)\n            }\n        },\n        updateComment(comment) {\n            if (comment.user != this.user.name) {\n                return\n            }\n            this.input = comment.comment\n            this.editingMode = true\n            this.editingComment = comment\n        }\n    }\n}\n</script>"]}]}